(this["webpackJsonpfrontend-search-engine-v2"]=this["webpackJsonpfrontend-search-engine-v2"]||[]).push([[0],{37:function(e,t){},52:function(e,t,n){},53:function(e,t,n){},58:function(e,t,n){},64:function(e,t){},65:function(e,t){},76:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(12),o=n.n(a),i=(n(52),n(53),n(14)),s=n(33),u=n(38),f=n.n(u),l=n(39),j=n(17),h=n.n(j),p=n(98),b=n(103),d=n(99),O=n(100),x=n(45),v=n.n(x),g=n(97),m=(n(58),n(101)),S=n(102),y=n(104),k=n(32),E=n.n(k),H=n(4),T=new f.a;function K(e,t){return function(e,t){return"trigram"===t?Object(l.a)(e):T.segment(e)}(h()(e).convert("HK","ZK").convert("ZS","HS").convert("ZE","HE").toString().trim(),t).map((function(e){if(" "!==e)return h()(e).convert("HG","KK").toString().toLowerCase()})).filter((function(e){return e}))}function _(e,t,n){if("plain"===t)return h()(e).convert("ZS","HS").toString();var c=K(e,n).map((function(e){return"'".concat(e)}));return"or"===t?c.join(" | "):c.join(" ")}function w(e){return!e.includes("tokenized")}function C(e,t,n){return w(n)?t.indices.map((function(t){return e.slice(t[0],t[1]+1)})):t.value}function Z(e,t){return e.replace(t,'<span class="highlight">'.concat(t,"</span>"))}function z(e,t){var n=e;return n=e.includes(t)?Z(n,t):Z(n,h()(t).convert("KK","HG").toString())}function I(e,t,n,c){for(var r=e[n],a=0;a<t.length;a++){var o=t[a],i=o.key;if((i.includes("_")?i.split("_")[1]:i)!==n)break;var s=C(r,o,i);if(w(i)){if("or"===c)continue;s.forEach((function(e){r=z(r,e)}));break}r=z(r,s)}return Object(H.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})}var L=function(e){var t=Object(c.createRef)(),n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)([]),f=Object(i.a)(u,2),l=f[0],j=f[1],x=Object(c.useState)(),k=Object(i.a)(x,2),T=k[0],w=k[1],C=e.tokenizer,Z=e.searchType,z=function(e){e&&e.arrayBuffer().then((function(e){var t=E.a.read(e,{type:"buffer",bookVBA:!0}),n=t.SheetNames[0],c=t.Sheets[n],r=E.a.utils.sheet_to_json(c),a=Object.keys(r[0]),i=[];r.forEach((function(e){var t={};Object.keys(e).forEach((function(n){var c;t[n]=e[n],t["search_".concat(n)]=(c=e[n],h()(c).convert("HK","ZK").convert("ZS","HS").convert("ZE","HE").convert("HG","KK").toString().trim().toLowerCase()),t["tokenized_".concat(n)]=K(e[n],C)})),i.push(t)}));var s=a;a.forEach((function(e){s.push("search_".concat(e)),s.push("tokenized_".concat(e))})),o(s),j(i)}))},L=Object(c.useState)(new s.a(l,T)),B=Object(i.a)(L,2),F=B[0],G=B[1],M=Object(c.useState)(""),P=Object(i.a)(M,2),A=P[0],D=P[1],J=Object(c.useState)([]),N=Object(i.a)(J,2),q=N[0],R=N[1];return Object(c.useEffect)((function(){w({includeScore:!0,includeMatches:!0,useExtendedSearch:!0,threshold:.3,keys:a})}),[a]),Object(c.useEffect)((function(){G(new s.a(l,T))}),[l]),Object(c.useEffect)((function(){R(F.search(_(A,Z,C)))}),[A]),console.log("index:",F),console.log("query:",_(A,Z,C)),console.log("search org:",F.search(A)),console.log("search: cleaned",F.search(_(A,Z,C))),Object(H.jsxs)("div",{children:[Object(H.jsxs)("h2",{children:["searchType: ",Z,", tokenizer: ",C]}),Object(H.jsxs)("div",{style:{padding:"20px"},children:[Object(H.jsx)(g.a,{variant:"contained",color:"primary",onClick:function(){t.current&&t.current.click()},children:"upload data"}),Object(H.jsx)("form",{style:{display:"none"},children:Object(H.jsx)("input",{type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ref:t,onChange:function(e){e.preventDefault(),z(e.currentTarget.files[0])}})})]}),Object(H.jsxs)(p.a,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:400},children:[Object(H.jsx)(d.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(H.jsx)(b.a,{sx:{ml:1,flex:1},placeholder:"Input Search Text",inputProps:{"aria-label":"input search text"},value:A,onChange:function(e){return D(e.target.value)}}),Object(H.jsx)(O.a,{type:"submit",sx:{p:"10px"},"aria-label":"search",children:Object(H.jsx)(v.a,{})}),Object(H.jsx)(d.a,{sx:{height:28,m:.5},orientation:"vertical"})]}),Object(H.jsx)(m.a,{children:q.map((function(e){return Object(H.jsx)(S.a,{children:Object(H.jsx)(y.a,{primary:I(e.item,e.matches,a[0],Z),secondary:I(e.item,e.matches,a[1],Z)},e.item[a[0]])})}))})]})};var B=function(){return Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)(L,{searchType:"and"}),Object(H.jsx)(L,{searchType:"or"}),Object(H.jsx)(L,{searchType:"plain"}),Object(H.jsx)(L,{searchType:"or",tokenizer:"trigram"})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,105)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(B,{})}),document.getElementById("root")),F()}},[[76,1,2]]]);
//# sourceMappingURL=main.63ccd708.chunk.js.map